
<ion-header>
  <ion-navbar>
    <ion-title>Corte de códigos RP</ion-title>
  </ion-navbar>
</ion-header>

<ion-content padding>

  <ion-row>
    <ion-col col-1></ion-col>
    <ion-col>
        <p class="lugar">
            Corte de códigos de invitación RP
            <br>
            <img src="./assets/content/line-hori.png" style="width: 40%;" alt="">
        </p>
        <ng-container *ngFor="let rp of rps">

          <p class="descrip">
            {{ rp.displayName }} / {{ rp.correo }}
          </p>

        </ng-container>
        
    </ion-col>
    <ion-col col-1></ion-col>
    <ion-col >

      <ng-container *ngFor="let rp of rps">
      
        <img src="{{ rp.photoURL }}?type=large&width=720&height=720" style="width:190%;border-radius:50px">

      </ng-container>

    </ion-col>

</ion-row>

  <form [formGroup]="myForm" (ngSubmit)="saveData()">

    <ion-list>

        <ion-item>

            <ion-label> <font color="black">  Fecha Inicio</font> </ion-label>

            <ion-datetime  style="color: black;" formControlName="FechaInicio" displayFormat="DD/MM/YYYY" min="2018" max="2050-10-31" doneText=Aceptar cancelText=Cancelar> </ion-datetime>

        </ion-item>

        <ion-item>

            <ion-label> <font color="black"> Fecha Fin  </font> </ion-label>

            <ion-datetime  style="color: black;"  formControlName="FechaFin" displayFormat="DD/MM/YYYY" min="2018" max="2050-10-31" doneText=Aceptar cancelText=Cancelar></ion-datetime>

        </ion-item>  

    </ion-list>

    <div padding>

        <button ion-button  color="naranja" block type="submit" [disabled]="!myForm.valid" >Generar</button>

      </div>
      
</form>

<ion-card class="card_atras" *ngIf="codigos != null ">

  <ion-card-content class="card_atras">

      <ion-card-title> 

          <h5 class="blanco_1"> Resumen de corte de códigos RP</h5>
                                   
      </ion-card-title>
      
      <ion-item class="card_atras" >

          <a class="blanco_2">Total de veces que fue usado el código</a>

          <h4 class="blanco_1"  ></h4>

          <ion-badge class="negro" item-end> {{ codigos.length }}</ion-badge>

      </ion-item>

      <ion-item class="card_atras" style="text-align: right;" >

        <a  (click)="accion1()" > <ion-icon name="arrow-dropdown"></ion-icon> </a>

    </ion-item>

  </ion-card-content>

 </ion-card>

 <!-- INICIA DETALLE  -->

 <ion-card class="card_atras" *ngFor="let codigo of codigos" >

  <ion-card-content class="card_atras"  *ngIf="ocultar1">
      <ion-card-title> 
      <p class="blanco_2">Detalles</p>
      </ion-card-title>

      <ion-item class="card_atras">
          <img class="icon" src="../assets/imgs/icons/calendario.png" item-start>
          <p class="blanco_2">Fecha de código</p>
          <ion-badge class="negro" item-end>{{ codigo.fecha | date }} </ion-badge>
      </ion-item>

      <ion-item class="card_atras">
          <img class="icon" src="../assets/imgs/icons/tarjeta.png" item-start>
          <a class="blanco_2">Código usado</a>
          <ion-badge class="negro" item-end> {{ codigo.codigoRpUser }}  </ion-badge>
      </ion-item>

      
      <ion-item class="card_atras" >
        <img class="icon" src="../assets/imgs/icons/profile.png" item-start>
        <a class="blanco_2"></a>
        <h4 class="blanco_1"  ></h4>

        <ng-container *ngFor="let nombreUsua of nombresUsua; let i = index">
        
                <div *ngIf="nombreUsua.uid == codigo.uidUser">

                  <ion-badge class="negro" item-end> {{ nombreUsua.displayName }}</ion-badge>

                </div>

        </ng-container>
      </ion-item>

  </ion-card-content>
  
</ion-card>
<br>

</ion-content>