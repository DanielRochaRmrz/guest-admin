<!--
  Generated template for the ReservaDetallePage page.

  See http://ionicframework.com/docs/components/#navigation for more info on
  Ionic pages and navigation.
-->
<ion-header>
    <ion-navbar class="borde">
        <ion-row>
            <ion-col col-1 align="center">
                <img src="./assets/content/line2.png" class="imgLi" alt="">
            </ion-col>
            <ion-col col-8>
                <div class="AdminEvento">Reservaciones Detalle</div>
                <div class="sucursal">Sucursal</div>
            </ion-col>
            <ion-col>
                <div align='end'>
                    <img src="./assets/content/corona.png" style="width: 40%;" alt="">
                </div>
            </ion-col>
        </ion-row>
    </ion-navbar>
</ion-header>

<ion-content padding>
  <br>
  <div>
  <font style="opacity: .5;" size=""> ACEPATADO</font><br>
  <span style="opacity: .5;">________________</span>
  </div>
  <div class="" align="right">
    <a color="dark" (click)="closeModal()">
        <ion-icon name="close" color="dark"></ion-icon>
      </a>


</div>
  <div *ngFor="let usuario of usuarios">
    <div *ngIf="usuario.uid == reserv.idUsuario">
       
        <div align="center">

          <font size="6" color="#474646">  <b> {{usuario.displayName}}</b></font>
        </div>
     <br>
     <br>
        <ion-row class="row1" style="margin-left:40px">
            <ion-col col-4>
                <div align="center">
                <img src="../assets/imgs/icons/Vector4.png" alt=""><br>  &emsp;{{reserv.hora}}
            </div>
            </ion-col>
            <ion-col col-2>
              <div align="center">
                <img src="../assets/imgs/icons/Vector2.png" alt=""><br> {{reserv.numPersonas}}
              </div>
            
              <!-- <ion-icon ios="ios-people" style="margin-left: 10px;" md="md-people" class="icono"></ion-icon> <br> &emsp;{{reserv.numPersonas}}hvhff -->
            </ion-col>
            <ion-col  col-4 text-right >
              <div align="center">
                <img src="../assets/imgs/icons/Vector31.png" alt=""> <br> &emsp;{{usuario.phoneNumber}}
              </div>
           
            </ion-col>
        </ion-row>
        <br>
        <br>

        <!-- <ion-row class="row1">
            <ion-col>
                <h4>Mesa:</h4>
                    <ion-icon ios="ios-menu" md="md-menu" class="icono"></ion-icon>&emsp; 1
                    {{reserv.numMesa}}
            </ion-col>
        </ion-row> -->
        <br><br>

        <ion-row class="row1" style="margin-left:40px">
            <!--<ion-col text-center (click)="modZonaMesa(reserv.uid, reserv.idSucursal, reserv.idArea, reserv.idZona)">
                <h3>Area: </h3>
                <ion-icon ios="ios-menu" md="md-menu" class="icono"></ion-icon>&emsp;{{area.nombre}}
            </ion-col>-->
           
            <!-- <ion-col col-3  align="center">
                <font>Area: </font> <br> &emsp; {{ totalReserv }}
            </ion-col>  -->
            <ion-col  col-6 align="center" (click)="modZonaMesa(reserv.uid, reserv.idSucursal, reserv.idArea, reserv.idZona)"> 
                <font>Zona: </font>
                <br> &emsp;{{zona.nombre}}
            </ion-col>

            <ion-col  col-3 align="center">
                <font>Total: </font>
               <br> {{ totalReserv }}
            </ion-col>
            
        </ion-row>

        <br>
        <br>
        <ion-row class="row1">
            <ion-col >
                <!-- <h4>Estado de la reservaci贸nn: </h4> -->
                
                <ion-icon ios="ios-book" md="md-book" class="icono"></ion-icon>&emsp;{{reserv.estatus}}
            </ion-col>

            <ion-col (click)="modStatus(reserv.idReservacion, reserv.idSucursal, reserv.numMesa, reserv.status )">                    
                
                
                <button ion-button  class="btnN">Mesa</button>
                <!-- <img class="icon" height="40px" width="40px" src="../assets/imgs/mesa.png" item-start> -->
                    {{ reserv.numMesa }}
            </ion-col>
        </ion-row>
        <br><br>

        <ion-row class="row" align="center">
            <ion-col  col-6 text-center (click)="modStatus_cancelacion(reserv.idReservacion, reserv.idSucursal)">
            <!-- <ion-col text-center (click)="Cancelar(reserv.uid)"> -->
                <!-- <ion-icon ios="ios-close-circle" md="md-close-circle" class="icono"></ion-icon>
                Cancelar Reservaci贸n -->
                <button ion-button color="danger" >Cancelar </button>
            </ion-col>
            <ion-col   col-6 text-center (click)="Aceptar(reserv.uid)">
                <!-- <ion-icon ios="ios-checkmark-circle" md="md-checkmark-circle" class="icono"></ion-icon>
                Aceptar Reservaci贸n -->
                <button ion-button color="secondary"  (click)="getUsersPusNoti()">Aceptar </button>
            </ion-col>
        </ion-row>
        <br><br>

        <ion-row class="title2">
            <ion-col text-center>
                <ion-item-divider color="light">Compartida con</ion-item-divider>
            </ion-col>
        </ion-row>

        <div *ngFor="let compartida of compartidas" >
            <div *ngFor="let user of usuarios">
                    <div *ngIf="compartida.idUsuario==user.uid" class="espacio">
                    <ion-row >
                        <ion-col col-2 text-center>
                            <ion-icon name="ios-person" style="background-color: gold;"></ion-icon>
                        </ion-col>
                        <ion-col col-3 text-center>
                            {{user.displayName}}
                        </ion-col>
                        <ion-col col-2 text-center >
                           $ {{compartida.totalDividido}}
                        </ion-col>
                    </ion-row>
                
                    </div>
            </div>
        </div>                <br><br>
     
        <ion-row class="title2">
            <ion-col text-center>
                <ion-item-divider color="light">Historial de Reservaciones</ion-item-divider>
            </ion-col>
        </ion-row>
        <div *ngIf="res==true">
            <ion-grid class="title3">
                <ion-row>
                    <ion-col text-center>
                        Establecimiento
                    </ion-col>
                    <ion-col text-center>
                        Fecha
                    </ion-col>
                    <ion-col text-center>
                        Hora
                    </ion-col>
                    <ion-col text-center>
                        Puntuaci贸n
                    </ion-col>
                </ion-row>
                <ion-row class="row1" *ngFor="let history of historial">
                    <ion-col text-center>
                        <div *ngFor="let sucursal of sucursales">
                            <div *ngIf="sucursal.$key==history.idSucursal">
                                {{sucursal.displayName}}
                            </div>
                        </div>
                    </ion-col>
                    <ion-col text-center>
                        {{history.fechaR | date : 'dd/MM/yyyy'}}
                    </ion-col>
                    <ion-col text-center>
                        {{history.hora}}
                    </ion-col>
                    <ion-col text-center>
                        {{history.puntuacion}} 5
                    </ion-col>
                </ion-row>
            </ion-grid>
        </div>
        <div *ngIf="res==false">
            <ion-row class="row1">
                <ion-col text-center class="col1">
                    El cliente no tiene reservaciones previas
                </ion-col>
            </ion-row>
        </div>
    </div>
</div>

</ion-content>

